// import React from 'react';
// import { MapContainer, TileLayer, Polyline } from 'react-leaflet';
// import 'leaflet/dist/leaflet.css';
// import polyline from '@mapbox/polyline'; // Updated import

// // Your encoded polyline string
// const encodedPolyline = "_vhnAwdhxMHh@v@Lt@Lx@Dx@??aAAqBEsDIyFXCf@GZCf@?`@FnARVFd@Hv@D|@Ft@Jt@DP@Ju@Jy@Fg@\\uAT{@jA{ERkAVw@ZcAJc@Nc@B]@KJg@@Gb@gClAc@bAC`AE`AETELERMDOB_A?W?g@?i@@_@?]Fa@DUJOdAmAz@q@lAiA`@g@\\k@Fi@Es@EOoB_EK]?q@@w@FUbA}AjB{A@AhAqBFKFSDOFk@H{E@W@WD[@KBODIBIDIl@}@HITYNSLYLWHYFWHg@Fc@?EFwA?ICg@?K?OB]?IDe@BUNqB^{EJw@^gDFm@JU@]?OCOG_@_AgECIOg@EQK]Mk@EKGMSc@KWGUCSCY?S@O?GBKFKFIFE`@OLI^a@NK\\UHIDIBIDEHGdAk@NIp@YNENCNAN?P?N?LALERKLKJIDCJQR]D[Bc@Ee@OoAASAEGi@AOIkAQgAOwAMkBGmAAk@?m@F}CNcE?m@BuCBiAHiBHkBFkADmBJmALw@Po@Xq@t@sAJQLUtBcDt@wA`@w@`BsCv@iAPWnAwB\\k@@ADGXg@Va@FKDEl@kAb@o@f@s@FMBCBEDIHMAK@MFKFIJCDAF?D?D@JDFHDL@LELb@PlAb@xBl@LBn@LV?J?dCMRATCd@En@EHAJ?dAItBMn@EVA|AM~AK\\C\\E^CTArAKlAIZCdAIj@EB?HAH?FCJILI\\e@CQ?a@Do@Dc@S}@E]AAOk@Sc@m@}@UYAC{I}K_@e@e@m@EE{FuG]_@S]GIIIGGKKWQOK{BeBuAgAY_@]e@Y]OQGKm@u@kA{Ag@m@e@s@Y_@}@_Bm@_A_@i@OWsB{CCEGIEIGKGYA[?Y@uA@s@FgG?K@SAWBQLq@~@wG^cCv@gF`BmKNeA@CD_@FUBWBIViBdBwL@GBMBO@KzBqN@M@IDU@KTkBZ_CZqBNoAHi@Ho@Hg@F]BQ@GHq@F]FYBSRmAVsBDi@By@AW?KAE?IAQTAn@ED?^?zACh@?hCOrAIbG]nCQRCtCu@PGbA_@JILQBI@G?QUq@w@cCAi@HeBJaAFYNq@rCuIRi@VUFENGZKFCdDoAtAk@l@UhAe@x@[d@[t@wA|AaDr@yAFK@EJYNq@PeBHc@jAqFdAeFNs@H{@Eo@k@qBe@}BEo@?}@FeAFq@@MDo@JaAFe@BQBQBU@EPyARsB\\wD?ENmB@G@QDo@JeCFu@Ds@LkD@iBH{ACs@?EB_@AMIQMKYEQBQLKXMr@EZDXNJTF^BN@f@@f@D`ANt@JxALnDPj@BH?X?F@^?~BGvAAzA?dB@zABhCH`ABf@Ff@PhBx@ZLbBx@pAp@rBbAXPNFb@Tp@Xf@PRHLDv@ZZH\\D^@d@EXKb@SROTSxA{At@eAZ]NONKj@W^K`@Et@?X@J@H@PDf@R~Ax@nAr@JF@@PHDB|DtBzDpBzC~AbDdB`D`B~C`BhAj@^RpAt@h@^VRt@t@j@r@T^Vd@Rj@Rl@Rz@D\\FZBXB^@x@Ax@?rA?BARCbE?TDlB?p@@v@Ar@?l@CxA@`@B^DZR~@DPDPJ\\JVJT@DHRVl@Xp@Zl@Vb@d@h@@BFHHLOLSNw@j@mA|@YRi@VoBp@iA^kAb@IDSHo@d@_Ax@aB`Ba@`@[ZeFpFKLKLIH_@b@e@j@e@j@m@n@sBbCk@t@c@j@wArBW`@aBlC_@f@o@dASRIBK@S@_@IUIaAc@ECyAs@[O}Aq@sCsAEAcAg@k@WCAEAIEIEECQE_Bu@y@_@]Qq@[i@Ww@UgAWMC[GICI?IDMLmBrEKLI?MCc@Em@GQCYCQCYGq@I]GYGUEm@Mi@KUGEAKAk@K_BQuBQm@Ii@GC?e@IoAQuA?{@@UB[FeDvB_@ToBn@m@RoIlCgDdAi@PoE~AgExAu@V[Jq@PG?U@EVk@~BWfA}@zDGXSz@ETCHUz@G\\Ml@CNCRG`@CLAJGXKn@M`AG^ADAF]|BIj@Kl@QjAAFEj@Db@??BNBT?B@HJt@NpAR~ABVDb@Ht@Fh@@L?B@FBL@DD^XjBNpABTT`B@F?H@JLdBLdA@D@HPrBJz@@LDd@Dn@Dh@?@@JHx@?F@F?HRnCF`A@JHfANnBDj@@NHhABd@@HJtARfCBRGz@Dh@@XBVZlELnB@LRpACd@ALKr@ERMXIJWTYVe@V}@f@UL{At@YJq@^IFi@^GDA@uAdBYd@Uf@CJERYpBCNCNCJCVOjBCf@?FJjBP~@DRLj@F`@BHBPHz@Dd@FnA@TT`BFTJVLXHPLRHFTVj@d@DDHZ@RGXEFc@Tm@Hg@Be@Ps@ZIFWROJs@r@OR{AbBSV_CpCKPa@b@mB|Be@f@MLw@x@[\\w@t@k@n@o@t@Y\\IHKPe@p@cA|AQZOXCFKb@ADGLQh@Yx@e@rAo@fBa@lAg@tASf@Qf@Sj@GPHDDA@@zDxBbBdAH]\\wABMNk@Pu@FUNm@Ps@Je@Ha@Ja@Lk@Ja@DS";

// const decodedPath = polyline.decode(encodedPolyline).map(coord => ({
//   lat: coord[0],
//   lng: coord[1]
// }));

// const center = [decodedPath[0].lat, decodedPath[0].lng];

// const MapComponent = () => {
//   return (
//     <MapContainer center={center} zoom={13} style={{ height: "600px", width: "100%" }}>
//       <TileLayer
//         url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
//         attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
//       />
//       <Polyline positions={decodedPath} color="red" />
//     </MapContainer>
//   );
// };

// export default MapComponent;
// import React from 'react';
// import { MapContainer, TileLayer, Polyline, Marker, Popup } from 'react-leaflet';
// import 'leaflet/dist/leaflet.css';
// import polyline from '@mapbox/polyline';
// import L from 'leaflet';

// // Define your polyline strings
// const routes = [
//   {
//     encoded: "_vhnAwdhxMHh@v@Lt@Lx@Dx@??aAAqBEsDIyFXCf@GZCf@?`@FnARVFd@Hv@D|@Ft@Jt@DP@Ju@Jy@Fg@\\uAT{@jA{ERkAVw@ZcAJc@Nc@B]@KJg@@Gb@gClAc@bAC`AE`AETELERMDOB_A?W?g@?i@@_@?]Fa@DUJOdAmAz@q@lAiA`@g@\\k@Fi@Es@EOoB_EK]?q@@w@FUbA}AjB{A@AhAqBFKFSDOFk@H{E@W@WD[@KBODIBIDIl@}@HITYNSLYLWHYFWHg@Fc@?EFwA?ICg@?K?OB]?IDe@BUNqB^{EJw@^gDFm@JU@]?OCOG_@_AgECIOg@EQK]Mk@EKGMSc@KWGUCSCY?S@O?GBKFKFIFE`@OLI^a@NK\\UHIDIBIDEHGdAk@NIp@YNENCNAN?P?N?LALERKLKJIDCJQR]D[Bc@Ee@OoAASAEGi@AOIkAQgAOwAMkBGmAAk@?m@F}CNcE?m@BuCBiAHiBHkBFkADmBJmALw@Po@Xq@t@sAJQLUtBcDt@wA`@w@`BsCv@iAPWnAwB\\k@@ADGXg@Va@FKDEl@kAb@o@f@s@FMBCBEDIHMAK@MFKFIJCDAF?D?D@JDFHDL@LELb@PlAb@xBl@LBn@LV?J?dCMRATCd@En@EHAJ?dAItBMn@EVA|AM~AK\\C\\E^CTArAKlAIZCdAIj@EB?HAH?FCJILI\\e@CQ?a@Do@Dc@S}@E]AAOk@Sc@m@}@UYAC{I}K_@e@e@m@EE{FuG]_@S]GIIIGGKKWQOK{BeBuAgAY_@]e@Y]OQGKm@u@kA{Ag@m@e@s@Y_@}@_Bm@_A_@i@OWsB{CCEGIEIGKGYA[?Y@uA@s@FgG?K@SAWBQLq@~@wG^cCv@gF`BmKNeA@CD_@FUBWBIViBdBwL@GBMBO@KzBqN@M@IDU@KTkBZ_CZqBNoAHi@Ho@Hg@F]BQ@GHq@F]FYBSRmAVsBDi@By@AW?KAE?IAQTAn@ED?^?zACh@?hCOrAIbG]nCQRCtCu@PGbA_@JILQBI@G?QUq@w@cCAi@HeBJaAFYNq@rCuIRi@VUFENGZKFCdDoAtAk@l@UhAe@x@[d@[t@wA|AaDr@yAFK@EJYNq@PeBHc@jAqFdAeFNs@H{@Eo@k@qBe@}BEo@?}@FeAFq@@MDo@JaAFe@BQBQBU@EPyARsB\\wD?ENmB@G@QDo@JeCFu@Ds@LkD@iBH{ACs@?EB_@AMIQMKYEQBQLKXMr@EZDXNJTF^BN@f@@f@D`ANt@JxALnDPj@BH?X?F@^?~BGvAAzA?dB@zABhCH`ABf@Ff@PhBx@ZLbBx@pAp@rBbAXPNFb@Tp@Xf@PRHLDv@ZZH\\D^@d@EXKb@SROTSxA{At@eAZ]NONKj@W^K`@Et@?X@J@H@PDf@R~Ax@nAr@JF@@PHDB|DtBzDpBzC~AbDdB`D`B~C`BhAj@^RpAt@h@^VRt@t@j@r@T^Vd@Rj@Rl@Rz@D\\FZBXB^@x@Ax@?rA?BARCbE?TDlB?p@@v@Ar@?l@CxA@`@B^DZR~@DPDPJ\\JVJT@DHRVl@Xp@Zl@Vb@d@h@@BFHHLOLSNw@j@mA|@YRi@VoBp@iA^kAb@IDSHo@d@_Ax@aB`Ba@`@[ZeFpFKLKLIH_@b@e@j@e@j@m@n@sBbCk@t@c@j@wArBW`@aBlC_@f@o@dASRIBK@S@_@IUIaAc@ECyAs@[O}Aq@sCsAEAcAg@k@WCAEAIEIEECQE_Bu@y@_@]Qq@[i@Ww@UgAWMC[GICI?IDMLmBrEKLI?MCc@Em@GQCYCQCYGq@I]GYGUEm@Mi@KUGEAKAk@K_BQuBQm@Ii@GC?e@IoAQuA?{@@UB[FeDvB_@ToBn@m@RoIlCgDdAi@PoE~AgExAu@V[Jq@PG?U@EVk@~BWfA}@zDGXSz@ETCHUz@G\\Ml@CNCRG`@CLAJGXKn@M`AG^ADAF]|BIj@Kl@QjAAFEj@Db@??BNBT?B@HJt@NpAR~ABVDb@Ht@Fh@@L?B@FBL@DD^XjBNpABTT`B@F?H@JLdBLdA@D@HPrBJz@@LDd@Dn@Dh@?@@JHx@?F@F?HRnCF`A@JHfANnBDj@@NHhABd@@HJtARfCBRGz@Dh@@XBVZlELnB@LRpACd@ALKr@ERMXIJWTYVe@V}@f@UL{At@YJq@^IFi@^GDA@uAdBYd@Uf@CJERYpBCNCNCJCVOjBCf@?FJjBP~@DRLj@F`@BHBPHz@Dd@FnA@TT`BFTJVLXHPLRHFTVj@d@DDHZ@RGXEFc@Tm@Hg@Be@Ps@ZIFWROJs@r@OR{AbBSV_CpCKPa@b@mB|Be@f@MLw@x@[\\w@t@k@n@o@t@Y\\IHKPe@p@cA|AQZOXCFKb@ADGLQh@Yx@e@rAo@fBa@lAg@tASf@Qf@Sj@GPHDDA@@zDxBbBdAH]\\wABMNk@Pu@FUNm@Ps@Je@Ha@Ja@Lk@Ja@DS",
//     color: 'red',
//     source: [37.7749, -122.4194], // Example coordinates for source
//     destination: [37.7849, -122.4094] // Example coordinates for destination
//   },
//   {
//     encoded: "s~zwGkdvhP?i@M|@QLEx@Gz@Od@Mx@?l@?l@Od@Bl@H|@Bv@@P@hB@pBBfAB\\Fz@DzABn@BbABiA@A^BAJAVHk@NmA^Aa@Wk@u@Ek@[k@a@b@[g@b@uA@MNM@A_@SMF[Ni@Cs@e@Ui@k@g@I[QYg@e@c@Qw@g@e@u@uA?YJ~@V@~@FJ@tB@hC\\r@p@lANd@Fx@\\`@Tf@dB\\r@Nh@Fd@Bh@Bp@@d@Dh@Fj@?V?@@Ap@?B?D?@h@@@BNx@@uBHuA`@{AeA_B[Fq@F_RjAlCg@iAe@kAe@{AYw@c@wB@?g@C]Gc@a@c@K{Dg@o@gB]AkAe@CQC]?AFAJAFA^AD@^At@VbAFYp@bDZnCB~@?GNg@t@cBFeB@_An@aATyA~@wBGs@Uq@Oa@QGE[OS?o@`@gB~@[g@{Ac@Qa@M{U_W]gBo@qAq@_@MWIm@]e@Wy@Ya@uAi@q@kA_A}@A]k@uA]u@e@]SyA[GCq@c@aA_@o@uAm@?o@SeBa@[e@Yi@Kw@u@YyA@O_@m@E}Aa@CAg@M{A_@o@w@gBy@wAWGAOGQOgBe@Qq@Qy@[OYOu@Yo@kAqA]a@a@c@Wi@Ye@uA_BICQq@m@@AYkAm@k@cB[@yA?g@Mk@_@a@Q_@sBqAq@MEcAq@_@}A_@iBAs@u@u@Ya@K{Ac@]u@_@m@I[Uc@aAiAi@WwAa@C]Cu@]q@e@CE?A@O[MeAc@q@IC[Wg@[Cq@e@k@Gq@e@k@a@uAe@UEyAm@c@Ye@q@AAQk@c@gB[Ys@Oc@o@c@AC[_@MEECC[Gk@Ia@i@]i@IYWa@c@e@kAe@Q]k@]iA]q@c@K{A`@Aq@w@i@o@]Cw@Gm@a@q@i@]gBq@OCk@e@aAi@e@o@[m@O[?QCE@QCk@Qc@k@a@[OmB[]s@Wa@e@}@[GAw@c@Sg@c@IYUk@Ua@u@Gq@Oa@K{Bs@w@q@k@g@k@e@g@M_@G{@i@u@w@C]Em@}Aa@w@aB_@Y[Aq@_A]QACAMGCYGu@S{@y@_A{Ea@w@UYCQCQOm@Qm@Su@Wk@e@c@Wk@w@SKEOCy@OmB[_@Qi@e@CEe@s@c@q@Wc@u@y@e@Qe@u@}A_@IAwA@AUi@QY?o@O{Am@e@[yAq@w@u@a@e@U_@Ui@Uu@Oa@C]MkB\\WCI]i@G}c@e@w@}A]AAa@iAq@@o@M{AeAqA?{A@k@u@oA]u@c@u@Uq@_@Cq@Oe@Io@[c@Eo@Qc@Oe@uAiA@ACs@_@q@q@y@_B}@E[Qw@UOAc@e@M_Aw@O_@Km@u@}A_B{CE@w@q@e@e@y@u@u@cBq@IEu@Me@Ic@A[?]e@]u@_@i@q@a@wAa@a@k@Oa@i@}A]CQg@c@a@k@_@a@y@M{@u@]k@Mg@Mk@Ow@a@a@_@e@C[@EE_Aq@[_@q@EAGQO_@e@Ie@Wc@u@_BQa@Uc@]s@i@qA_Aq@Uk@_B_Ic@a@Ue@s@S[Bc@kA@O_Ai@@cA]s@i@UEo@Gq@q@o@_@e@k@e@c@_@s@k@_@u@CEs@u@y@q@i@K@oA{A}@kA[w@aA@{A]}Aq@k@e@u@Cq@_@u@QE}Aq@]k@Qa@Gg@_A@]e@O_@O_@I{@u@C[_@e@]iA_A_A}@g@}@s@c@Gq@M{CkAq@q@Wa@Ua@k@Ue@a@_@w@Qw@k@_A]c@i@]iA",
//     color: 'blue',
//     source: [37.7749, -122.4294], // Example coordinates for source
//     destination: [37.7849, -122.4194] // Example coordinates for destination
//   }
// ];

// const MapComponent = () => {
//   const decodedPaths = routes.map(route => polyline.decode(route.encoded).map(([lat, lng]) => [lat, lng]));

//   return (
//     <MapContainer center={routes[0].source} zoom={13} style={{ height: "600px", width: "100%" }}>
//       <TileLayer
//         url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
//         attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
//       />
//       {routes.map((route, index) => (
//         <React.Fragment key={index}>
//           <Polyline positions={decodedPaths[index]} color={route.color} />
//           <Marker position={route.source} icon={L.icon({ iconUrl: 'source-icon.png', iconSize: [32, 32] })}>
//             <Popup>Source</Popup>
//           </Marker>
//           <Marker position={route.destination} icon={L.icon({ iconUrl: 'destination-icon.png', iconSize: [32, 32] })}>
//             <Popup>Destination</Popup>
//           </Marker>
//         </React.Fragment>
//       ))}
//     </MapContainer>
//   );
// };

// export default MapComponent;
import React, { useState, useEffect } from 'react';
import axios from 'axios';

const DirectionsComponent = () => {
  const [directions, setDirections] = useState(null);
  const [hasWaypoints, setHasWaypoints] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    const fetchDirections = async () => {
      try {
        // Replace with your actual API key
        const apiKey = 'MdsBLQtub1D2n4KEMKHXyHggjA89vCj0RIJbx2YH';
        const origin = '82.244399,16.982171';
        const destination = '83.226565, 17.703916';
        // const waypoints = '18.75171540179755,73.4067693460594'; // Add more waypoints as needed

        const response = await axios.post(`https://api.olamaps.io/routing/v1/directions`, null, {
          params: {
            origin,
            destination,
            // waypoints,
            api_key: apiKey
          }
        });

        const data = response.data;
        setDirections(data);

        // Check if waypoints are present
        if (data.geocoded_waypoints && data.geocoded_waypoints.length > 2) {
          setHasWaypoints(true);
        } else {
          setHasWaypoints(false);
        }

      } catch (err) {
        setError('Failed to fetch directions');
        console.error(err);
      }
    };

    fetchDirections();
  }, []);

  if (error) return <div>{error}</div>;
  if (!directions) return <div>Loading...</div>;

  return (
    <div>
      <h1>Directions</h1>
      <p>{hasWaypoints ? 'Waypoints are included in the route.' : 'No waypoints included in the route.'}</p>
      {/* You can also render the directions data here */}
    </div>
  );
};

export default DirectionsComponent;
